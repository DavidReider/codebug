"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _ValidationError = _interopRequireDefault(require("../ValidationError"));

var _pathToString = _interopRequireDefault(require("./pathToString"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable complexity */
var _default = (result, message, options) => {
  if (Array.isArray(result)) {
    if (result.length === 0) {
      return true;
    }

    return result;
  }

  if (result === true) {
    return true;
  }

  if (typeof result === 'string') {
    return new _ValidationError.default(message || result);
  }

  if (result && result.message && result.paths) {
    return new _ValidationError.default(message || result.message, {
      paths: result.paths
    });
  }

  var path = (0, _pathToString.default)(options.path);
  throw new Error("".concat(path, ": Validator must return 'true' if valid or an error message as a string on errors"));
};

exports.default = _default;